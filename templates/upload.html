<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
</head>
<body>
  <h1>Upload Image</h1>
  <input type="file" id="myFileUpload">
  <button id="uploadButton">Upload Image</button>

<script>
    const uploadButton = document.getElementById("uploadButton");
    const fileUpload = document.getElementById("myFileUpload");

    uploadButton.addEventListener("click", () => {
      const file = fileUpload.files[0];
      const formData = new FormData();
      formData.append("image", file);

      const xhr = new XMLHttpRequest();
      xhr.open("POST", "/upload");
      xhr.onload = function() {
        if (xhr.status === 200) {
          const response = JSON.parse(xhr.responseText);
          if (response.status === 'success') {
            window.open(response.url, '_blank');
          } else {
            console.error("Upload failed.");
          }
        } else {
          console.error("Upload failed.");
        }
      };
      xhr.send(formData);
    });

    // function upload() {
    // var file = document.getElementById("myFileUpload").files[0];
    // var formData = new FormData();
    // formData.append("image", file);
    // var xhr = new XMLHttpRequest();
    // xhr.open("POST", "upload", true);
    // xhr.onload = function() {
    //   if (xhr.status === 200) {
    //     var response = JSON.parse(xhr.responseText);
    //     if(response.status === 'success'){
    //       window.open(response.url, '_blank');
    //     }else{
    //       console.error("Upload failed.");
    //     }
    //   }else{
    //       console.error("Upload failed.");
    //     }
           
            
</script>
    <!-- <input type="file" id="myFileUpload"><button onclick="upload()">Upload Image</button> -->
    
</body>
</html>